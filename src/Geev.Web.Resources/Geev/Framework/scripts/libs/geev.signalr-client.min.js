var geev=geev||{};(function(){function t(n){geev.signalr.hubs.common=n;n.onclose(function(t){(t?geev.log.debug("Connection closed with error: "+t):geev.log.debug("Disconnected"),geev.signalr.autoConnect)&&setTimeout(function(){n.start()},5e3)});n.on("getNotification",function(n){geev.event.trigger("geev.notifications.received",n)})}function n(n,t){return geev.signalr.remoteServiceBaseUrl&&(n=geev.signalr.remoteServiceBaseUrl+n),geev.signalr.qs&&(n+=(n.indexOf("?")==-1?"?":"&")+geev.signalr.qs),function i(r){geev.log.debug("Starting connection using "+signalR.HttpTransportType[r]+" transport");var u=(new signalR.HubConnectionBuilder).withUrl(n,r).build();return t&&typeof t=="function"&&t(u),u.start().then(function(){return u}).catch(function(n){return(geev.log.debug("Cannot start the connection using "+signalR.HttpTransportType[r]+" transport. "+n.message),r!==signalR.HttpTransportType.LongPolling)?i(r+1):Promise.reject(n)})}(signalR.HttpTransportType.WebSockets)}signalR&&(geev.signalr=geev.signalr||{},geev.signalr.hubs=geev.signalr.hubs||{},geev.signalr.connect=function(){var i=geev.signalr.url||geev.appPath+"signalr";n(i,t).then(function(n){geev.log.debug("Connected to SignalR server!");geev.event.trigger("geev.signalr.connected");n.invoke("register").then(function(){geev.log.debug("Registered to the SignalR server!")})}).catch(function(n){geev.log.debug(n.message)})},geev.signalr.startConnection=n,geev.signalr.autoConnect===undefined&&(geev.signalr.autoConnect=!0),geev.signalr.autoConnect&&!geev.signalr.hubs.common&&geev.signalr.connect())})();